---
import { storyblokEditable } from '@storyblok/astro';
const { blok } = Astro.props
---

<div class="flex flex-col overflow-hidden justify-center w-full bg-red-400 h-full rounded-3xl p-8" x-data="{ testimonialActive: 1 }" {...storyblokEditable(blok)}>
  <div>
    <div class="relative flex flex-col h-full text-left">
      <div class="relative z-10 h-full">
        <div class="pb-6 max-w-xl mx-auto h-64">
          {
            blok.messages.map((message, i) => 
              <div x-show.immediate=`testimonialActive === ${i+1}` style="display: none;">
                <p class="font-medium leading-6 text-white text-2xl md:text-3xl text-balanc flex gap-2 items-center text-center mx-auto" x-show.transition=`testimonialActive == ${i+1}` style="display: none;">
                  {message.body}
                </p>
              </div>
            )
          }
        </div>
        <div class="flex items-center justify-center mt-6 lg:my-4">
          <button @click.prevent="testimonialActive = 1" class="inline-block mx-2 font-bold text-center rounded-full shadow-xs focus:outline-none focus:ring-2 size-12 opacity-50" :class="{'size-12 opacity-50 ': testimonialActive != 1, 'opacity-100 text-white': testimonialActive == 1 }">
            <img class="inline-block size-12 rounded-full grayscale border" src="/heart.webp" alt="#_" />
          </button>
          <button @click.prevent="testimonialActive = 2" class="inline-block mx-2 font-bold text-center rounded-full shadow-xs focus:outline-none focus:ring-2 size-12 opacity-50" :class="{'size-12 opacity-50 ': testimonialActive != 2, 'opacity-100 ': testimonialActive == 2 }">
            <img class="inline-block size-12 rounded-full grayscale border" src="/heart.webp" alt="#_" />
          </button>
          <button @click.prevent="testimonialActive = 3" class="inline-block mx-2 font-bold text-center rounded-full shadow-xs focus:outline-none focus:ring-2 opacity-100 text-white" :class="{'size-12 opacity-50 ': testimonialActive != 3, 'opacity-100 text-white': testimonialActive == 3 }">
            <img class="inline-block size-12 rounded-full grayscale border object-cover" src="/heart.webp" alt="3_r" />
          </button>
        </div>
        <div class="flex justify-center px-4 pt-4 pb-6 md:py-6">
          {
            blok.messages.map((message, i) => 
              <div class="text-center" x-show=`testimonialActive == ${i+1}` style="display: none;">
                <h2 class="text-white text-sm font-medium lg:text-lg">
                  {message.caption}
                </h2>
              </div>
            )
          }
        </div>
      </div>
    </div>
  </div>
</div>
